## 问题
- “点击这里获取密钥”链接写死为 Gemini，未随平台切换
- 检测状态用单一 `testStatus`，在 Gemini 检测后 DeepSeek/Kimi/OpenAI 标题也显示“连接正常”

## 解决方案
### 1. 建立平台配置表（只读常量）
- 文件：`src/services/ai/config.ts`
- 内容：
  - `getKeyUrl`：各平台密钥申请地址（Gemini/OpenAI/DeepSeek/Kimi）
  - `defaultBase`：各平台默认 API Base
  - `authType`：`queryKey`（Gemini）或 `bearer`（其余）
  - `detectEndpoint`：统一 `/v1/models`
  - `defaultModels`：各平台默认模型集合

### 2. 检测逻辑服务化
- 文件：`src/services/ai/detect.ts`
- 方法：`detectProvider({ provider, base, key, useBff })`
- 行为：按 `providerConfig` 组合 URL 与 Header；8s 超时；返回 `{ ok, status }`

### 3. Settings 弹窗联动修复（保留现有 UI）
- 文件：`src/components/business/SettingsDialog.tsx`
- 修改：
  - 链接：`href = providerConfig[provider].getKeyUrl`
  - 状态：用 `detectStatusByProvider: Record<AIProvider, string>` 代替全局 `testStatus`
    - 标题右侧显示：`detectStatusByProvider[provider]`
    - 切换平台：若目标平台无状态，显示空；不复用上一平台的状态
  - 检测：`runDetect` 调用 `detectProvider`，只更新当前平台键值
  - 地址与模型：优先读 `settings`，缺省用 `providerConfig` 的 `defaultBase/defaultModels`

### 4. 行为细节
- 切换平台后不自动保存；点击“保存”才持久化 `base/agentModel/modelsList`
- “备用地址”后续可作为二次检测按钮（当前留空）

### 5. 验证
- 切换到各平台，密钥链接正确；模型列表不混淆；各平台的检测状态独立维护

### 6. 交付顺序
1) 新增 `config.ts`；2) 改造 `detect.ts` 使用配置；3) 更新 Settings 使用配置与独立状态；4) 回归测试各平台切换与检测显示