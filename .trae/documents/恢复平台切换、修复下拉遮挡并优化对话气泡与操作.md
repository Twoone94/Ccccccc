## 问题与目标
- 恢复聊天区左上角的平台切换入口（符合用户定位与操作预期）。
- 下拉菜单在界面被遮挡：让平台+模型下拉可“智能浮动”，空间不足时出现在触发按钮上方。
- 对话消息的气泡与操作：AI左、用户右；复制/删除改为气泡下方的图标按钮，移除文字按钮。
- 参考优秀Chat界面（assistant-ui/ChatUI），保证流式、自动滚动、可访问性与一致视觉规范。

## 设计与交互
- 左上平台切换：
  - 在中栏标题行右侧或旁边新增小型切换控件（按钮或微型下拉），始终可见。
  - 切换后更新 `provider` 并刷新可选模型列表；保持当前会话的模型 `activeModel` 与会话设置。
- 平台+模型下拉（输入区右侧标签）：
  - 使用“浮动菜单”模式：根据 `getBoundingClientRect()` 判断空间，优先在下方展开；空间不足时改为在上方。
  - 菜单使用 `position: fixed` 并提高 `z-index`，避免被父容器的 `overflow: hidden` 截断。
  - 菜单中第一行是平台快速切换，下面是对应模型列表；选择后即时应用。
- 消息气泡与操作：
  - 渲染结构：每条消息为一行；内含气泡和“操作栏”；操作栏位于气泡下方居右（用户）或居左（AI）。
  - 操作图标：复制、删除（内联SVG）；悬停高亮，点击执行；移除文字按钮。
  - 视觉：用户气泡高对比背景、AI低对比背景；最大宽度约72ch；保持自动滚动与流式更新。

## 实施步骤（文件与位置）
- `src/pages/CopywritingCreationInterface.tsx`
  1) 恢复左上平台切换：在标题行容器 `338–359` 附近插入平台切换控件，复用 `provider` 状态与 `saveSettings` 更新；联动 `activeModel` 初始值。
  2) 下拉遮挡修复：
     - 为输入区的标签按钮保持 `onClick` 打开菜单；将菜单从当前容器的 `absolute` 改为 `fixed` 浮层，计算坐标并根据空间选择“上方/下方”。
     - 提高层级 `z-[1000]`；监听窗口滚动/改变时重新定位或关闭。
  3) 气泡与操作：
     - 调整消息渲染 `444–466`，为每条消息增加一个“操作栏”容器，放置复制/删除图标（SVG），移除文字按钮。
     - 保持 AI 左/用户右对齐与现有自动滚动逻辑；流式状态以“正在生成…”或打字点指示。
  4) 细节修正：确保所有内联SVG属性为驼峰（已完成），下拉状态变量声明完善（已声明 `showModelMenu`）。
- `src/services/ai/gemini.ts`
  - 候选模型回退已加入：确保当选择的模型不支持对应方法时自动尝试下一个；无须再改动。

## 验证
- 左上角平台切换可见、可用；切换平台后模型列表同步更新。
- 输入区标签打开的菜单不再被父容器遮挡；空间不足时菜单出现在按钮上方。
- 消息气泡正常显示；复制/删除图标位于气泡下方并可用；流式生成与自动滚动保持正常。

## 对齐优秀Chat界面
- 采用assistant-ui/ChatUI的气泡与操作分层、流式与滚动体验；统一尺寸与交互反馈（hover/active/focus）。
- 后续可选：Markdown与代码高亮、重试按钮、消息时间戳与分组。