## 目标
- Settings 弹窗中的“点击这里获取密钥”链接根据平台动态切换（Gemini/DeepSeek/Kimi/OpenAI 不同地址）
- 模型选择列表按平台独立维护（不混淆），切换平台时联动地址、模型与检测
- 保持现有 UI，不改变布局，只替换数据来源与联动逻辑

## 现状问题
- “获取密钥”链接写死为 Gemini 链接；其他平台需不同链接
- 模型下拉框写死为两个 `genmini-*`，与平台不匹配
- 检测逻辑虽已分平台，但耦合在组件中，后续复用不便

## 方案概述
- 新增统一配置表 `providerConfig`（文件：`src/services/ai/config.ts`）：按平台定义
  - `name`、`getKeyUrl`、`defaultBase`、`detectEndpoint`（相对路径）
  - `authType`（`queryKey`/`bearer`）、`defaultModels`（数组）
- SettingsDialog 读取当前 `provider` 的配置，动态渲染：
  - 链接：`<a href={providerConfig[provider].getKeyUrl}>`
  - 模型下拉：`options = settings.modelsList[provider] ?? providerConfig[provider].defaultModels`
  - 地址：优先 `settings.base[provider]`，无则用 `defaultBase`
- 检测逻辑迁移到 `detect.ts`（已存在初版）：改为使用 `providerConfig` 自动拼接 URL、Header；SettingsDialog 仅调用 service
- 切换平台时联动：
  - 更新标题右侧检测状态为“未检测”
  - 渲染对应的地址、模型、链接；不立即写盘，只有点击“保存”才持久化

## 配置表（示例）
- **Gemini**
  - `getKeyUrl`: `https://aistudio.google.com/app/apikey`
  - `defaultBase`: `https://generativelanguage.googleapis.com`
  - `authType`: `queryKey`
  - `detectEndpoint`: `/v1/models`
  - `defaultModels`: `['gemini-2.5-pro','gemini-1.5-pro','gemini-2.0-flash']`
- **OpenAI**
  - `getKeyUrl`: `https://platform.openai.com/api-keys`
  - `defaultBase`: `https://api.openai.com`
  - `authType`: `bearer`
  - `detectEndpoint`: `/v1/models`
  - `defaultModels`: `['gpt-4o-mini','gpt-4o','gpt-3.5-turbo']`
- **DeepSeek**
  - `getKeyUrl`: `https://platform.deepseek.com/api-keys`
  - `defaultBase`: `https://api.deepseek.com`
  - `authType`: `bearer`
  - `detectEndpoint`: `/v1/models`
  - `defaultModels`: `['deepseek-chat','deepseek-reasoner']`
- **Kimi（Moonshot）**
  - `getKeyUrl`: `https://platform.moonshot.cn/api-keys`（或官方文档链接）
  - `defaultBase`: `https://api.moonshot.cn`
  - `authType`: `bearer`
  - `detectEndpoint`: `/v1/models`
  - `defaultModels`: `['moonshot-v1-8k','moonshot-v1-32k']`

## 具体改造步骤
1. 新增 `src/services/ai/config.ts`
   - 导出 `providerConfig` 与类型 `ProviderKey = 'gemini'|'openai'|'deepseek'|'kimi'`
2. 修改 `src/services/ai/detect.ts`
   - 通过 `providerConfig` 组合 URL 与 Header；保留 `useBff` 支持
3. 修改 `src/components/business/SettingsDialog.tsx`
   - 引入并使用 `providerConfig[provider]`：
     - 链接 `getKeyUrl` 动态赋值
     - 模型下拉：优先 `settings.modelsList[provider]`，为空时展示 `defaultModels`
     - 地址：输入框初值为 `settings.base[provider] ?? defaultBase`
   - 切换平台后：重置 `testStatus` 为 `''`
4. 保持保存逻辑：点击“保存”将 `base/agentModel/modelsList` 写入对应平台分支

## 文案创作聊天（后续任务）
- 在 `src/services/ai/client.ts` 增加 `createClient(settings)`：按平台构造请求与流式解析
- 在 `CopywritingCreationInterface.tsx` 将 `streamChat` 替换为统一 client（保留现有 UI）

## 测试与验收
- 切换到每个平台：
  - “获取密钥”链接跳转正确
  - 模型下拉列表为对应平台的默认集合，且可保存覆盖
  - “检测”对应平台返回合理状态
- 回归：保存后重开设置弹窗，显示与持久化一致

## 兼容与安全
- 不显示完整密钥；状态提示不输出服务端堆栈
- `baseAlt` 可作为后续降级策略；本次不改 UI

请确认以上规划，我将按此创建配置文件并改造 Settings 弹窗与检测逻辑，随后推进聊天客户端接入。