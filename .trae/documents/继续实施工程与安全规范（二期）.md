## 已完成
- 统一端口到 `5174` 并以环境变量驱动 Electron（`electron/main.cjs`、脚本已更新）。
- 开启 Electron 安全选项（`contextIsolation/sandbox/nodeIntegration:false`）与页面 CSP。
- 新增 ESLint/Prettier/EditorConfig/Typecheck 脚本与依赖。
- 引入 Vitest，添加 `chat.store` 基础测试与测试脚本。

## 下一步计划

### 1. 持续集成
- 新增 GitHub Actions 工作流：`install → typecheck → lint → test → build`；启用 Node 缓存与矩阵（Node 18/20）。

### 2. 提交流程
- 引入 `lint-staged` 与 `husky` pre-commit 钩子：对暂存文件执行 `eslint --fix` 与 `prettier`；run `typecheck` 与最小测试集。
- 引入 `commitlint`（约束 Conventional Commits），添加 `commitlint.config.cjs` 与 `husky commit-msg` 钩子。

### 3. 测试补齐
- 组件：为 `src/components/ui/Toolbar.tsx`、`src/components/ui/shadcn/Input.tsx` 添加渲染与交互测试。
- 服务：为 `src/services/ai/gemini.ts` 增加 mock 流程测试，覆盖 `sendChat/streamChat` 分支与错误路径（不触网）。
- 目标：基础覆盖率报表生成，CI 通过。

### 4. 资源规范
- 将 `SettingsDialog` 中 `.figma` 资源改用 `public/image` 下现有资源；统一引入路径为 `/image/...`，避免设计稿目录进入构建。

### 5. 可访问性
- 落地 `eslint-plugin-jsx-a11y`：修复装饰性图标 `aria-hidden`、交互元素语义与可聚焦性；完善 `alt` 文本策略。

### 6. 安全与隐私（阶段性）
- 迁移 API 密钥至主进程安全存储（如 `keytar`），提供 `preload` 受限读写接口；替换渲染端 `localStorage` 使用。
- 审视 `detect.ts/gemini.ts` 的密钥流向，避免在渲染端泄露；必要时引入后端代理 `useBff` 模式。

### 7. 性能与维护
- 将 `ProjectInterface` 的 500ms 轮询改为事件驱动/降频策略（焦点/显隐/保存时同步），减少资源占用与抖动。
- 统一日志层与等级，替换散落的 `console.*` 为受控logger。

## 验证
- 本地跑通：`npm run typecheck`、`npm run lint`、`npm run test`、`npm run build`。
- CI：推送后工作流全部成功。

## 是否执行
- 如确认，开始落地以上变更（CI/钩子/测试/资源修复/a11y），安全存储迁移将按阶段推进。