## 目标
- 将聊天消息容器透明化，但保留气泡与操作icon的可读背景与对比度。
- 修复平台/模型下拉：点击外部、Esc、滚动/缩放均关闭；位置智能选择上/下展开；字号统一。
- 模型切换与设置同步：平台切换后模型列表准确；模型选择与设置中的模型保持一致，同时具备回退。
- 对齐优秀Chat体验：AI左、用户右；流式/非流式良好；自动滚动、快捷键与无障碍完善。

## UI与样式
- 透明化：
  - 将右侧消息列表容器 `bg-app` 替换为透明（仅容器透明），保留消息气泡背景（用户高对比、AI低对比）与操作icon底色 `bg-surface`。
  - 统一字号：消息气泡、原文、文案创作区使用同一字号体系（如 `text-[13px]`/`[14px]`），在页面内统一常量或样式变量。
- 操作icon：
  - 图标按钮尺寸 `24×24`，圆角 `6`，悬停态高亮；在气泡下方按左右对齐。

## 下拉菜单行为
- 模型下拉（输入区右侧标签）：
  - 使用 `position: fixed` 浮层，计算触发按钮 `getBoundingClientRect()`，上下空间不足时自动上方展开；`z-index` 明显高于页面。
  - 关闭事件：点击外部、Esc、滚动与窗口变化均关闭；打开时将焦点移入菜单，支持上下键与Enter选择。
  - 菜单内容仅显示当前平台的模型列表，字号与行高与页面统一。
- 平台下拉（聊天区顶部左侧）：
  - 同样为浮层定位与关闭逻辑；列表包含 `openai/gemini/deepseek/kimi`。

## 模型切换与设置同步
- 数据源：以 `src/store/settings.ts` 的 `getAgentModelList(provider)` 为唯一真源，平台变化后刷新模型列表；关键词过滤移除，完整展示列表。
- 同步策略：
  - 在聊天页选择模型：更新当前会话的 `modelName`，并将其写回设置中的 `agentModel`（或仅会话内保存，按你的偏好可开关）。
  - 发送时：将 `provider` 与 `modelName` 一并透传；Gemini服务层保留候选回退，遇到404/不支持自动换下一模型。

## 消息体验
- 渲染：AI左、用户右；最大宽度约 `72ch`；支持连续流式拼接与自动滚动到底。
- 辅助：复制/删除icon带 `title/aria-label`；错误提示与状态文案（“正在生成…”）统一字号与颜色。

## 无障碍与键盘
- 打开菜单后焦点进入菜单；Esc关闭并返回触发按钮；Tab/Shift+Tab在菜单内循环；上下键选择，Enter确认。
- 气泡与按钮具有可感知的 `aria-label` 与 `role`；颜色对比度符合可读性。

## 错误处理与日志
- 模型不可用/404：在UI提示“该模型不可用，已回退至X”，同时记录到控制台。
- Key缺失/连接失败：在输入区上方显示红色提示；引导到设置。
- 捕获流式错误并安全结束流。

## 验证清单
- 透明化：容器透明后气泡与图标可读性不受影响。
- 下拉位置：在窄屏与小视口下展开位置正确；关闭逻辑完整。
- 模型同步：切换平台后模型列表正确；选择模型后发送用该模型；与设置模型保持一致。
- 流式/非流式：两种模式均正常；自动滚动可靠。
- 无障碍：Esc/外部点击/滚动均关闭；键盘导航正常。

## 实施步骤与代码位置
- `src/pages/CopywritingCreationInterface.tsx`
  - 将消息列表容器背景调为透明，保留气泡背景（消息渲染段 `messagesViewRef` 容器）。
  - 统一气泡字号与输入区字号；改造复制/删除为下方icon（已部分完成，继续统一样式）。
  - 模型下拉：固定定位、智能上/下展开、关闭逻辑与键盘导航；仅模型列表。
  - 平台下拉：聊天区顶部左侧按钮，固定定位与关闭逻辑一致，数据为平台列表。
- `src/services/ai/gemini.ts`
  - 保留 `modelName` 透传与候选回退逻辑；针对404/不支持记录回退模型，并将文案反馈到UI。
- `src/store/settings.ts`
  - 模型列表以 `getAgentModelList` 统一；当会话选择模型时可同步 `agentModel`（可配置是否写回）。

## 交互微调（可选）
- 下拉菜单在小屏改为全宽抽屉；菜单内支持搜索过滤模型。
- 气泡支持Markdown/代码高亮；消息时间戳与分组；“重试本条”icon。

请确认上述方案后，我将按此逐项落地并自测，通过预览验证所有细节。