## 目标
- 在文案创作界面顶栏同步“设置”入口图标，并打开现有 `SettingsDialog`。
- 梳理并优化聊天侧栏的交互与结构，提高可用性与可维护性。

## 设置图标同步
- 文件：`src/pages/CopywritingCreationInterface.tsx`
- 动作：
  - 在顶栏 `Toolbar` 右侧按钮组中新增“设置”按钮，引用与 `SettingsDialog.tsx` 相同的资源 `icoSettings`（`'../../../.figma/image/editor-add-tab.svg'`）。
  - 本页维护 `const [settingsOpen, setSettingsOpen] = useState(false)`，点击按钮 `setSettingsOpen(true)`。
  - 在页面末尾挂载 `<SettingsDialog open={settingsOpen} onClose={()=>setSettingsOpen(false)} />`。
- 风格：与现有顶栏按钮尺寸风格一致（`w-[14px] h-[14px]`、`text-secondary`、`rounded-[6px]`）。

## 聊天界面优化
### 组件拆分
- 新建轻量组件（同文件内或 `src/components/business/chat/`）：
  - `ChatMessageItem`：根据 `role` 渲染头像、气泡、时间、操作（复制/删除）。
  - `ChatMessageList`：负责自动滚动到底部、空状态引导、加载指示。
  - `ChatInput`：多行输入、Enter 发送、Ctrl+Enter 换行、字数提示。
- 目的：避免当前页面内联 JSX 过长，提升维护性。

### 交互增强
- Markdown 渲染与代码块高亮（渐进式引入，保持无第三方时退化为纯文本）。
- 流式输出：沿用现有 `gemini.ts` 的 `streamChat`，其他平台保留普通发送，未来可统一接口。
- 状态提示：
  - 正在输入/思考指示（dot loader）。
  - 发送失败错误提示与重试按钮。
- 会话管理：
  - 保留当前“选择/保存/清空”，补充“重命名会话”、最近 5 条会话快速切换。
  - 将消息与会话键值按 `{provider}:{sessionId}` 组织，切换平台不混淆。

### 模型与检测联动
- 模型下拉来自“存储 ∪ 默认”并已过滤 `gemini-1.5-pro`（现有逻辑）。
- 点击“检测”即按当前选中模型进行最小化调用（现已实现）。
- 发送时附带当前模型，失败时提示“该模型不可用，尝试另一个模型”。

### 输入与工具
- 输入框支持粘贴富文本并清洗为纯文本（防样式污染）。
- 快捷工具按钮：保留“生成分镜/角色/剧本”，增加按钮禁用态与 loading 态。
- 从中栏文案选择一段文本→右侧聊天输入预填（便于围绕选区优化）。

## 无障碍与细节
- 为关键按钮添加 `aria-label` 与 `title`；气泡对比度与暗色主题一致。
- 长消息点击“展开/收起”；复制成功的轻提示。

## 验证
- 打开文案页：顶栏出现设置图标；点击打开 `SettingsDialog`。
- 聊天：
  - 切换模型后发送与检测均按当前模型工作。
  - 流式输出、自动滚动、失败重试、复制、删除正常。
- 回归：不影响现有原文/文案编辑与滚动条逻辑。

## 交付方式
- 以最小改动先在同文件内拆分三个子组件；后续视情况抽取到 `src/components/business/chat/`。
- 不新增外部依赖；Markdown/高亮如需，先占位后按需引入。请确认后我开始实施。